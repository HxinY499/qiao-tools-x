/*
 * Notion Style Dark (scoped for markdown-body)
 * Source: https://github.com/s1m4ne/typora-theme-notion-style (Apache-2.0)
 */

.markdown-body {
  color-scheme: dark;
  --accent-color: #9ca6a8;
  --accented-background-color: #2b2b2b;
  --bg-color: #191919;
  --border-color: #3d3d3d;
  --text-color: #d4d4d4;
  --header-color: #d4d4d4;
  --link-color: #9c9c9c;
  --code-bg-color: #292927;
  --code-block-bg-color: #202020;
  --code-color: #eb5757;
  --code-border-radius: 10px;
  --body-font: -apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft YaHei", "Noto Sans SC", "Microsoft JhengHei", "Noto Sans TC", "Meiryo", "Yu Gothic", "Noto Sans JP", "Malgun Gothic", "Noto Sans KR", sans-serif;
  --monospace-font: "Sarasa Mono SC", "Source Han Mono", "Space Mono", "Inconsolata", SFMono-Regular, Menlo, Consolas, monospace;
  --font-size: 16px;
  --h1-fontsize: 1.875rem;
  --h2-fontsize: 1.5rem;
  --h3-fontsize: 1.25rem;
  --line-height: 1.6;
  --monospace-font-size: 0.875rem;
  --monospace-line-height: 0.8;
  --content-max-width: 105ch;
  --content-padding-x: 10ch;
  --content-padding-y: 32px;

  /* Shiki Code Highlight Variables - Notion Dark */
  --shiki-foreground: #d4d4d4;
  --shiki-background: #202020;
  --shiki-token-constant: #6ab0f3;
  --shiki-token-string: #92d192;
  --shiki-token-comment: #6d6d6d;
  --shiki-token-keyword: #fca369;
  --shiki-token-parameter: #d4d4d4;
  --shiki-token-function: #c397d8;
  --shiki-token-string-expression: #92d192;
  --shiki-token-punctuation: #d4d4d4;
  --shiki-token-link: #6ab0f3;

  /* Mermaid Theme Variables */
  --mermaid-background: #191919;
  --mermaid-primaryColor: #2b2b2b;
  --mermaid-primaryTextColor: #d4d4d4;
  --mermaid-primaryBorderColor: #3d3d3d;
  --mermaid-lineColor: #9c9c9c;
  --mermaid-textColor: #d4d4d4;
  background: var(--bg-color);
  color: var(--text-color);
  font-family: var(--body-font);
  font-size: var(--font-size);
  line-height: var(--line-height);
  min-height: 100%;
  padding: var(--content-padding-y) max(var(--content-padding-x), calc((100% - var(--content-max-width)) / 2 + var(--content-padding-x)));
  word-break: break-word;
}

.markdown-body * {
  box-sizing: border-box;
}

.markdown-body a {
  color: var(--link-color);
  text-decoration: none;
}

.markdown-body a:hover {
  text-decoration: underline;
}

.markdown-body img {
  max-width: 100%;
  border-radius: 10px;
  display: block;
  margin: 0.75rem auto;
}

.markdown-body p {
  margin: 1rem 0;
}

.markdown-body strong {
  font-weight: 700;
}

.markdown-body em {
  font-style: italic;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  color: var(--header-color);
  font-weight: 700;
  line-height: 1.3;
  margin-top: 2.25rem;
  margin-bottom: 1rem;
}

.markdown-body h1 {
  font-size: var(--h1-fontsize);
  border-bottom: 1px solid rgba(61, 61, 61, 0.75);
  padding-bottom: 0.35rem;
}

.markdown-body h2 {
  font-size: var(--h2-fontsize);
  border-bottom: 1px solid rgba(61, 61, 61, 0.75);
  padding-bottom: 0.3rem;
}

.markdown-body h3 {
  font-size: var(--h3-fontsize);
}

.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  font-size: 1.05rem;
}

.markdown-body hr {
  border: none;
  border-bottom: 1px solid var(--border-color);
  margin: 2rem 0;
}

.markdown-body blockquote {
  margin: 1.25rem 0;
  padding: 0.25rem 1.25rem;
  border-left: 3px solid var(--text-color);
  color: #a7a7a7;
  background: linear-gradient(90deg, rgba(61, 61, 61, 0.35), rgba(32, 32, 32, 0.35));
  border-radius: 6px;
}

.markdown-body ul,
.markdown-body ol {
  margin: 1rem 0;
  padding-left: 1.25rem;
}

.markdown-body li {
  margin: 0.35rem 0;
}

.markdown-body li p {
  margin: 0.35rem 0 0.25rem;
}

.markdown-body .task-list-item {
  list-style: none;
  position: relative;
  padding-left: 1.6rem;
}

.markdown-body .task-list-item input[type='checkbox'] {
  appearance: none;
  position: absolute;
  left: 0;
  top: 0.1rem;
  width: 1rem;
  height: 1rem;
  border: 2px solid var(--text-color);
  border-radius: 4px;
  background: transparent;
  cursor: pointer;
}

.markdown-body .task-list-item input[type='checkbox']:checked {
  background: #2483e2;
  border-color: #2483e2;
}

.markdown-body .task-list-item input[type='checkbox']:checked::after {
  content: '';
  position: absolute;
  left: 0.24rem;
  top: 0.1rem;
  width: 0.35rem;
  height: 0.65rem;
  border: 2px solid #ffffff;
  border-top: 0;
  border-left: 0;
  transform: rotate(43deg);
}

.markdown-body table {
  border-collapse: collapse;
  margin: 1.25rem 0;
  max-width: 100%;
  width: auto;
}

.markdown-body th,
.markdown-body td {
  border: 1px solid var(--border-color);
  padding: 0.5rem 0.9rem;
  text-align: left;
  vertical-align: top;
}

.markdown-body tr:nth-child(2n) {
  background: rgba(61, 61, 61, 0.3);
}

.markdown-body code:not(.shiki code) {
  font-family: var(--monospace-font);
  font-size: var(--monospace-font-size);
  line-height: var(--monospace-line-height);
  color: var(--code-color);
  background: var(--code-bg-color);
  padding: 0.12em 0.35em;
  border-radius: 6px;
}

.markdown-body pre {
  background: var(--code-block-bg-color);
  color: var(--text-color);
  border-radius: var(--code-border-radius);
  padding: 1.1rem 1.25rem;
  overflow: auto;
  font-family: var(--monospace-font);
  font-size: var(--monospace-font-size);
  line-height: var(--monospace-line-height);
  border: 1px solid rgba(61, 61, 61, 0.65);
}

.markdown-body pre code {
  background: transparent;
  color: inherit;
  padding: 0;
}

.markdown-body .shiki {
  background: var(--code-block-bg-color) !important;
  border-radius: var(--code-border-radius);
  padding: 1.1rem 1.25rem;
  overflow: auto;
  border: 1px solid rgba(61, 61, 61, 0.65);
}

.markdown-body .shiki code {
  font-family: var(--monospace-font);
  font-size: var(--monospace-font-size);
  line-height: var(--monospace-line-height);
}

.markdown-body .shiki .line {
  display: block;
}

/* Shiki token colors mapped from Typora CodeMirror palette */
.markdown-body .shiki .token.keyword,
.markdown-body .shiki .token.builtin { color: #67a2cc; }
.markdown-body .shiki .token.operator { color: #f5b73d; }
.markdown-body .shiki .token.function,
.markdown-body .shiki .token.variable { color: #ecec93; }
.markdown-body .shiki .token.number,
.markdown-body .shiki .token.constant,
.markdown-body .shiki .token.tag,
.markdown-body .shiki .token.attr-name,
.markdown-body .shiki .token.property { color: #e06c75; }
.markdown-body .shiki .token.string,
.markdown-body .shiki .token.class-name,
.markdown-body .shiki .token.attr-value { color: #bde051; }
.markdown-body .shiki .token.comment { color: #998066; }
.markdown-body .shiki .token.meta { color: #dcdcdc; }

.markdown-body kbd {
  display: inline-block;
  padding: 0.25rem 0.4rem;
  font-size: 12px;
  line-height: 1;
  color: var(--text-color);
  background: #22242a;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.3);
}

.markdown-body sup.md-footnote {
  background: rgba(61, 61, 61, 0.8);
  color: var(--text-color);
  border-radius: 4px;
  padding: 0.05rem 0.25rem;
}

.markdown-body details {
  border: 1px solid var(--border-color);
  border-radius: 8px;
  padding: 0.75rem 1rem;
  background: rgba(32, 32, 32, 0.7);
}

.markdown-body summary {
  cursor: pointer;
  font-weight: 600;
}

/* 强制覆盖代码样式，避免被 shiki 默认样式覆盖 */
.markdown-body pre,
.markdown-body .shiki {
  background: var(--code-block-bg-color) !important;
  color: var(--text-color) !important;
  padding: 1.1rem 1.25rem !important;
  border-radius: var(--code-border-radius) !important;
  line-height: var(--monospace-line-height) !important;
}

.markdown-body .shiki code {
  font-family: var(--monospace-font) !important;
  font-size: var(--monospace-font-size) !important;
  line-height: var(--monospace-line-height) !important;
  display: block !important;
}

.markdown-body :not(pre) > code {
  background: var(--code-bg-color) !important;
  color: var(--code-color) !important;
  border-radius: 6px !important;
  font-weight: 600 !important;
  padding: 0.12em 0.35em !important;
}

.markdown-body code[class*="language-"],
.markdown-body pre[class*="language-"] {
  background: var(--code-block-bg-color) !important;
  color: var(--text-color) !important;
}

.markdown-body .token.keyword,
.markdown-body .token.builtin { color: #67a2cc !important; }
.markdown-body .token.operator { color: #f5b73d !important; }
.markdown-body .token.function,
.markdown-body .token.variable { color: #ecec93 !important; }
.markdown-body .token.number,
.markdown-body .token.constant,
.markdown-body .token.tag,
.markdown-body .token.attr-name,
.markdown-body .token.property { color: #e06c75 !important; }
.markdown-body .token.string,
.markdown-body .token.class-name,
.markdown-body .token.attr-value { color: #bde051 !important; }
.markdown-body .token.comment { color: #998066 !important; }
.markdown-body .token.meta { color: #dcdcdc !important; }
